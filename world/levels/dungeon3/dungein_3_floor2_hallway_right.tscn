[gd_scene load_steps=57 format=3 uid="uid://dcrpujfoas0jc"]

[ext_resource type="PackedScene" uid="uid://cnd06dpkgufe4" path="res://world/levels/level_base.tscn" id="1_7yvo4"]
[ext_resource type="Script" path="res://addons/rmsmartshape/shapes/shape.gd" id="2_sb11j"]
[ext_resource type="Script" path="res://addons/rmsmartshape/vertex_properties.gd" id="3_6dkau"]
[ext_resource type="Script" path="res://addons/rmsmartshape/shapes/point.gd" id="4_hulif"]
[ext_resource type="Script" path="res://addons/rmsmartshape/shapes/point_array.gd" id="5_qr4ui"]
[ext_resource type="Resource" uid="uid://vgy02p4w5scg" path="res://world/smart_shapes/stone/stone.tres" id="6_x4h6b"]
[ext_resource type="Resource" uid="uid://ddqyt2fjwf66q" path="res://world/smart_shapes/hole/hole.tres" id="7_qqck0"]
[ext_resource type="Texture2D" uid="uid://dc4pcxr2lfkka" path="res://demo_art/dungeon_entrance.png" id="8_mlf4h"]
[ext_resource type="Script" path="res://world/interactable/transition_trigger/transition_trigger.gd" id="9_sm4l5"]
[ext_resource type="PackedScene" uid="uid://bbwsv2e8utpd6" path="res://world/decoration/toches/torch.tscn" id="10_wcrs6"]
[ext_resource type="PackedScene" uid="uid://dph4c117nmx5n" path="res://world/decoration/toches/fire_green.tscn" id="11_devl2"]

[sub_resource type="Resource" id="Resource_5qja7"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_ih1ul"]
script = ExtResource("4_hulif")
position = Vector2(-217.869, -948.65)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_5qja7")

[sub_resource type="Resource" id="Resource_i4leb"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_usi8r"]
script = ExtResource("4_hulif")
position = Vector2(1022.83, -965.214)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_i4leb")

[sub_resource type="Resource" id="Resource_u3pks"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_ovfgi"]
script = ExtResource("4_hulif")
position = Vector2(1072.15, 1138.12)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_u3pks")

[sub_resource type="Resource" id="Resource_1isat"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_lytj5"]
script = ExtResource("4_hulif")
position = Vector2(-191.052, 1132.47)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_1isat")

[sub_resource type="Resource" id="Resource_xgtne"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_6cutj"]
script = ExtResource("4_hulif")
position = Vector2(-217.869, -948.65)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_xgtne")

[sub_resource type="Resource" id="Resource_yhkwg"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_fnv76"]
script = ExtResource("4_hulif")
position = Vector2(175.379, -953.354)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_yhkwg")

[sub_resource type="Resource" id="Resource_vm1j3"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_bam36"]
script = ExtResource("4_hulif")
position = Vector2(168.252, -1170.73)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_vm1j3")

[sub_resource type="Resource" id="Resource_5ab4m"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_qum8f"]
script = ExtResource("4_hulif")
position = Vector2(567.375, -1177.86)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_5ab4m")

[sub_resource type="Resource" id="Resource_4eda4"]
script = ExtResource("3_6dkau")
texture_idx = 4
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_nwmyd"]
script = ExtResource("4_hulif")
position = Vector2(574.502, -971.172)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_4eda4")

[sub_resource type="Resource" id="Resource_7rvno"]
script = ExtResource("5_qr4ui")
_points = {
0: SubResource("Resource_ih1ul"),
1: SubResource("Resource_usi8r"),
2: SubResource("Resource_ovfgi"),
3: SubResource("Resource_lytj5"),
4: SubResource("Resource_6cutj"),
5: SubResource("Resource_fnv76"),
6: SubResource("Resource_bam36"),
7: SubResource("Resource_qum8f"),
8: SubResource("Resource_nwmyd")
}
_point_order = PackedInt32Array(0, 5, 6, 7, 8, 1, 2, 3, 4)
_constraints = {
Vector2i(0, 4): 15
}
_next_key = 9
_material_overrides = {}
tessellation_stages = 3
tessellation_tolerance = 6.0
curve_bake_interval = 20.0

[sub_resource type="Resource" id="Resource_2omfy"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_o51fx"]
script = ExtResource("4_hulif")
position = Vector2(145.511, 1.78915)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_2omfy")

[sub_resource type="Resource" id="Resource_lcilr"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_uurty"]
script = ExtResource("4_hulif")
position = Vector2(584.449, -58.7489)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_lcilr")

[sub_resource type="Resource" id="Resource_biy44"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_kg6bq"]
script = ExtResource("4_hulif")
position = Vector2(888.719, -32.5557)
point_in = Vector2(-101.563, -39.1996)
point_out = Vector2(101.563, 39.1996)
properties = SubResource("Resource_biy44")

[sub_resource type="Resource" id="Resource_sf825"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_5vhes"]
script = ExtResource("4_hulif")
position = Vector2(997.889, 48.1358)
point_in = Vector2(-2.82837, -12.7279)
point_out = Vector2(2.82837, 28.4423)
properties = SubResource("Resource_sf825")

[sub_resource type="Resource" id="Resource_hxgtn"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_08oow"]
script = ExtResource("4_hulif")
position = Vector2(1027.7, 200.86)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_hxgtn")

[sub_resource type="Resource" id="Resource_l0tqr"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_v2qkk"]
script = ExtResource("4_hulif")
position = Vector2(776.865, 426.041)
point_in = Vector2(149.671, 0)
point_out = Vector2(-149.671, 0)
properties = SubResource("Resource_l0tqr")

[sub_resource type="Resource" id="Resource_plplj"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_dhckp"]
script = ExtResource("4_hulif")
position = Vector2(372.938, 364.361)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_plplj")

[sub_resource type="Resource" id="Resource_crdw1"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_4yxtp"]
script = ExtResource("4_hulif")
position = Vector2(14.4294, 404.126)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_crdw1")

[sub_resource type="Resource" id="Resource_m0p1j"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_jak4a"]
script = ExtResource("4_hulif")
position = Vector2(-151.85, 300.64)
point_in = Vector2(14.2544, 83.7445)
point_out = Vector2(-14.2544, -83.7445)
properties = SubResource("Resource_m0p1j")

[sub_resource type="Resource" id="Resource_3eftv"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_ydju7"]
script = ExtResource("4_hulif")
position = Vector2(-122.378, 43.0027)
point_in = Vector2(-76.2813, 61.4489)
point_out = Vector2(76.2813, -61.4489)
properties = SubResource("Resource_3eftv")

[sub_resource type="Resource" id="Resource_r7ksg"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_ydgmb"]
script = ExtResource("4_hulif")
position = Vector2(145.511, 1.78915)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_r7ksg")

[sub_resource type="Resource" id="Resource_rksin"]
script = ExtResource("3_6dkau")
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id="Resource_qatj4"]
script = ExtResource("4_hulif")
position = Vector2(1033.61, 148.685)
point_in = Vector2(0, 0)
point_out = Vector2(0, 0)
properties = SubResource("Resource_rksin")

[sub_resource type="Resource" id="Resource_b6os4"]
script = ExtResource("5_qr4ui")
_points = {
0: SubResource("Resource_o51fx"),
1: SubResource("Resource_uurty"),
2: SubResource("Resource_kg6bq"),
3: SubResource("Resource_5vhes"),
4: SubResource("Resource_08oow"),
5: SubResource("Resource_v2qkk"),
6: SubResource("Resource_dhckp"),
7: SubResource("Resource_4yxtp"),
8: SubResource("Resource_jak4a"),
9: SubResource("Resource_ydju7"),
10: SubResource("Resource_ydgmb"),
11: SubResource("Resource_qatj4")
}
_point_order = PackedInt32Array(0, 1, 2, 3, 11, 4, 5, 6, 7, 8, 9, 10)
_constraints = {
Vector2i(0, 10): 15
}
_next_key = 12
_material_overrides = {}
tessellation_stages = 3
tessellation_tolerance = 6.0
curve_bake_interval = 20.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_b0g0r"]
size = Vector2(158, 146)

[node name="D3Floor2RightHallway" instance=ExtResource("1_7yvo4")]

[node name="Background" type="ColorRect" parent="." index="0"]
z_index = -1000
offset_left = -2184.0
offset_top = -2718.0
offset_right = 3494.0
offset_bottom = 2847.0
color = Color(0, 0, 0, 1)

[node name="MiddleLeft1B" type="Node2D" parent="EntryPoints" index="0"]
position = Vector2(-20, 728)

[node name="Player" parent="." index="6"]
position = Vector2(84, 794)

[node name="Ground" type="Node2D" parent="." index="7"]
z_index = -10
script = ExtResource("2_sb11j")
_points = SubResource("Resource_7rvno")
shape_material = ExtResource("6_x4h6b")

[node name="Hole" type="StaticBody2D" parent="." index="8"]
collision_layer = 8

[node name="SmartShape" type="Node2D" parent="Hole" index="0"]
script = ExtResource("2_sb11j")
_points = SubResource("Resource_b6os4")
shape_material = ExtResource("7_qqck0")
collision_polygon_node_path = NodePath("../CollisionPolygon2D")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hole" index="1"]
visible = false
modulate = Color(1, 1, 1, 0.3)
polygon = PackedVector2Array(145.511, 1.78915, 584.449, -58.7489, 698.498, -60.3521, 798.33, -53.1857, 846.485, -44.9358, 888.719, -32.5557, 948.226, -5.20018, 967.147, 6.84599, 980.33, 17.7169, 988.883, 27.347, 993.92, 35.6706, 996.552, 42.6221, 997.889, 48.1358, 1004.66, 75.8457, 1033.61, 148.685, 1027.7, 200.86, 1009.55, 236.045, 958.409, 313.451, 922.004, 354.792, 879.2, 390.856, 855.592, 405.26, 830.615, 416.365, 804.347, 423.512, 776.865, 426.041, 372.938, 364.361, 14.4294, 404.126, -9.54726, 399.733, -63.3649, 383.787, -92.974, 370.186, -119.855, 352.139, -131.212, 341.288, -140.613, 329.131, -147.634, 315.603, -151.85, 300.64, -171.065, 163.461, -168.984, 129.444, -161.169, 97.4057, -154.645, 82.4208, -146.13, 68.2808, -135.436, 55.1025, -122.378, 43.0027, -106.799, 32.4134, -88.9661, 23.5893, -48.3392, 10.6393, 40.1718, -0.647412, 145.511, 1.78915)

[node name="BottomDoor" type="Sprite2D" parent="." index="9"]
position = Vector2(1068, 703)
scale = Vector2(2.33037, 2.33037)
texture = ExtResource("8_mlf4h")

[node name="TransitionScene" type="Area2D" parent="BottomDoor" index="0"]
position = Vector2(-6.00761, 27.8925)
scale = Vector2(0.429116, 0.429116)
collision_layer = 0
collision_mask = 2
script = ExtResource("9_sm4l5")
scene_name = "latest_demo_2"
entry_point = "Dungeon"

[node name="CollisionShape2D" type="CollisionShape2D" parent="BottomDoor/TransitionScene" index="0"]
position = Vector2(6, -13)
shape = SubResource("RectangleShape2D_b0g0r")

[node name="LowerRight1B" type="Sprite2D" parent="." index="10"]
position = Vector2(759, 1061)
scale = Vector2(2.33037, 2.33037)
texture = ExtResource("8_mlf4h")

[node name="TransitionScene" type="Area2D" parent="LowerRight1B" index="0"]
position = Vector2(-6.00761, 27.8925)
scale = Vector2(0.429116, 0.429116)
collision_layer = 0
collision_mask = 2
script = ExtResource("9_sm4l5")
scene_name = "latest_demo_2"
entry_point = "Dungeon"

[node name="CollisionShape2D" type="CollisionShape2D" parent="LowerRight1B/TransitionScene" index="0"]
position = Vector2(6, -13)
shape = SubResource("RectangleShape2D_b0g0r")

[node name="TopDoor" type="Sprite2D" parent="." index="11"]
position = Vector2(1017, -557)
scale = Vector2(2.33037, 2.33037)
texture = ExtResource("8_mlf4h")

[node name="TransitionScene" type="Area2D" parent="TopDoor" index="0"]
position = Vector2(-6.00761, 27.8925)
scale = Vector2(0.429116, 0.429116)
collision_layer = 0
collision_mask = 2
script = ExtResource("9_sm4l5")
scene_name = "latest_demo_2"
entry_point = "Dungeon"

[node name="CollisionShape2D" type="CollisionShape2D" parent="TopDoor/TransitionScene" index="0"]
position = Vector2(6, -13)
shape = SubResource("RectangleShape2D_b0g0r")

[node name="RightMiniBoss" type="Sprite2D" parent="." index="12"]
position = Vector2(384, -1263)
scale = Vector2(2.33037, 2.33037)
texture = ExtResource("8_mlf4h")

[node name="TransitionScene" type="Area2D" parent="RightMiniBoss" index="0"]
position = Vector2(-6.00761, 27.8925)
scale = Vector2(0.429116, 0.429116)
collision_layer = 0
collision_mask = 2
script = ExtResource("9_sm4l5")
scene_name = "latest_demo_2"
entry_point = "Dungeon"

[node name="CollisionShape2D" type="CollisionShape2D" parent="RightMiniBoss/TransitionScene" index="0"]
position = Vector2(6, -13)
shape = SubResource("RectangleShape2D_b0g0r")

[node name="Torch" parent="." index="13" instance=ExtResource("10_wcrs6")]
position = Vector2(-4, 539)

[node name="Fire" parent="Torch" index="2" instance=ExtResource("11_devl2")]

[node name="Torch2" parent="." index="14" instance=ExtResource("10_wcrs6")]
position = Vector2(816, 531)

[node name="Fire" parent="Torch2" index="2" instance=ExtResource("11_devl2")]

[node name="Torch3" parent="." index="15" instance=ExtResource("10_wcrs6")]
position = Vector2(827, -182)

[node name="Fire" parent="Torch3" index="2" instance=ExtResource("11_devl2")]

[node name="Torch4" parent="." index="16" instance=ExtResource("10_wcrs6")]
position = Vector2(-22, -168)

[node name="Fire" parent="Torch4" index="2" instance=ExtResource("11_devl2")]

[connection signal="body_entered" from="BottomDoor/TransitionScene" to="BottomDoor/TransitionScene" method="_on_body_entered"]
[connection signal="body_entered" from="LowerRight1B/TransitionScene" to="LowerRight1B/TransitionScene" method="_on_body_entered"]
[connection signal="body_entered" from="TopDoor/TransitionScene" to="TopDoor/TransitionScene" method="_on_body_entered"]
[connection signal="body_entered" from="RightMiniBoss/TransitionScene" to="RightMiniBoss/TransitionScene" method="_on_body_entered"]
